<template>
    <lightning-card title="OKR Dashboard" icon-name="standard:dashboard">
        <div class="top">
            <div class="left">
                <!--
                <template if:true={selectedUser}>
                    <p>User: <span>{selectedUser.Name}</span> </p>
                    <template if:true={isYearSelected}>
                        <p>Year: <span>{chosenYearForTheUser}</span> </p>
                    </template>
                    <template if:false={isYearSelected}>
                        <p>Year: <span>{currentYear}</span> </p>
                    </template>
                </template>
                
                <template if:false={selectedUser}>
                    <p>User: <span>{userName}</span> </p>
                    <template if:true={isYearSelected}>
                        <p>Year: <span>{chosenYearForTheUser}</span> </p>
                    </template> 
                    <template if:false={isYearSelected}>
                    <p>Year: <span>{currentYear}</span></p>
                    </template>
                </template>
                -->
                    <p>User: <span>{displayedUserName}</span></p>
                    <p>Year: <span>{yearValue}</span></p>
            </div>
            <div class="right">
                <lightning-combobox
                    name="changeYear"
                    label="Change year"
                    value={yearValue}
                    placeholder="Select Year"
                    options={yearOptions}
                    onchange={handleYearChange}
                    dropdown-alignment="auto" 
                ></lightning-combobox>

                <lightning-combobox
                    name="selectUser"
                    label="Select a user"
                    value={userValue}
                    placeholder="Select user"
                    options={userOptions}
                    onchange={handleUserChange}
                    dropdown-alignment="auto"  
                ></lightning-combobox>

                <lightning-combobox
                    name="createNew"
                    label="Create"
                    value={value}
                    placeholder="New"
                    options={creatingOptions}
                    onchange={handleCreatingChange}
                    dropdown-alignment="auto"  
                ></lightning-combobox>

            </div>
        </div>
        
        <!-- objective containing the card with key result and target-->
        <!--<div class="main">
            <p class="slds-text-heading_medium">New Clients</p>
            
            
            <div class="sub-main">
                <div class="key-result">
                    <p>Q1 Objective</p>
                </div>
                
                <div class="target">
                    <p>LinkedIn Leads: 0/50</p>
                    <p>Opportunities: 0/30</p>
                    <p>Calls: 0/150</p>
                    <p>Contracts: 0/10</p>
                </div>
            </div>
            
            
            <div class="sub-main">
                
                <div class="key-result">
                    <p>Q1 Objective</p>
                </div>
                <div class="target">
                    <p>LinkedIn Leads: 0/50</p>
                    <p>Opportunities: 0/30</p>
                    <p>Calls: 0/150</p>
                    <p>Contracts: 0/10</p>
                </div>  
            </div>

        </div>-->

        <template if:true={isYearSelected}>
            <template if:true={hasObjectives}>
                <template for:each={objectives} for:item="obj">
                    <hr key={obj.Id}>
                    <div key={obj.Id} class="main">
                        <p class="slds-text-heading_medium">{obj.Name}</p>
                        <p> {obj.Year__c}</p>
                        <div class="sub-main">
                            <div class="key-result">
                                <p>Q1 Objective</p>
                            </div>
                
                            <div class="target">
                                <p>LinkedIn Leads: 0/50</p>
                                <p>Opportunities: 0/30</p>
                                <p>Calls: 0/150</p>
                                <p>Contracts: 0/10</p>
                            </div>
                        </div>
                    </div>
                </template>
            </template>

            <template if:false={hasObjectives}>
                <div class="noObjectives">
                    <hr>
                    <p class="">There are no objectives for selected year.</p>
                </div>
            </template>
        </template>
        
        
    </lightning-card>

    <template if:true={showObjectiveForm}>
        <c-objective-form
            onsave={handleObjectiveSave}
            oncancel={handleObjectiveCancel}
        ></c-objective-form>
    </template>

    <!-- Key Result Form Pop-up using child component keyResultForm -->
    <template if:true={showKeyResultForm}>
        <c-key-result-form 
            onsave={handleKeyResultSave}
            oncancel={handleKeyResultCancel}
        ></c-key-result-form>
    </template>

    <template if:true={showReviewForm}>
        <c-review-form 
            onsave={handleReviewSave}
            oncancel={handleReviewCancel}
        ></c-review-form>
    </template>

    <template if:true={showSurveyForm}>
        <c-survey-form
            onsave={handleSurveySave}
            oncancel={handleSurveyCancel}
        ></c-survey-form>
    </template>

    <template if:true={showCaseStudyForm}>
        <c-case-study-form
            onsave={handleCaseStudySave}
            oncancel={handleCaseStudyCancel}
        ></c-case-study-form>
    </template>
    
    <template if:true={showGoogleReviewForm}>
        <c-google-review-form
            onsave={handleGoogleReviewSave}
            oncancel={handleGoogleReviewCancel}
        ></c-google-review-form>
    </template>

</template>